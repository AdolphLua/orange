Info3: <<
Package: orange-svn
Version: 0.0.__DAILY_REVISION__
Revision: 7
Source: http://www.ailab.si/orange/fink/dists/10.5/main/source/orange-svn-%v.tgz
Source-MD5: __DAILY_MD5SUM_ORANGE__
Source2: http://www.ailab.si/orange/fink/dists/10.5/main/source/orange-bundlelite-svn-%v.tgz
Source2-MD5: __DAILY_MD5SUM_BUNDLELITE__
Maintainer: Mitar <mitar@tnode.com>
HomePage: http://www.ailab.si/orange/
License: GPL
Distribution: 10.4, 10.5
Depends: <<
	python25,
	orange-svn-py25 (>= %v),
	pyqt4mac-py25 (>= 4.4),
	pyqwt-qt4mac-py25 (>= 5.1),
	graphviz
<<
Conflicts: orange
Architecture: i386, powerpc
Description: Component-based data mining software
DescDetail: <<
	Orange is a component-based data mining software. It includes a range
	of data visualization, exploration, preprocessing and modeling
	techniques. It can be used through a nice and intuitive user interface
	or, for more advanced users, as a module for Python programming language.
	
	This package provides a graphical user interface.
<<
AppBundles: Orange.app
SplitOff: <<
	Package: orange-svn-py25
	Depends: <<
		python25,
		numpy-py25
	<<
	Suggests: orange-svn
	Conflicts: orange-py25
	DescDetail: <<
		Orange is a component-based data mining software. It includes a range
		of data visualization, exploration, preprocessing and modeling
		techniques. It can be used through a nice and intuitive user interface
		or, for more advanced users, as a module for Python programming language.
		
		This package provides a Python module.
	<<
	Shlibs: <<
		%p/lib/python2.5/site-packages/orange/orange.so 0.0.0 %n (>= 0.0.0-1)
		%p/lib/python2.5/site-packages/orange/orangeom.so 0.0.0 %n (>= 0.0.0-1)
		%p/lib/python2.5/site-packages/orange/corn.so 0.0.0 %n (>= 0.0.0-1)
		%p/lib/python2.5/site-packages/orange/statc.so 0.0.0 %n (>= 0.0.0-1)
		%p/lib/python2.5/site-packages/orange/orangene.so 0.0.0 %n (>= 0.0.0-1)
		%p/lib/python2.5/site-packages/orange/_orngCRS.so 0.0.0 %n (>= 0.0.0-1)
	<<
	Files: <<
		lib/python2.5/site-packages/orange/*.so
		lib/python2.5/site-packages/orange/orng*.py
		lib/python2.5/site-packages/orange/mathutil.py
		lib/python2.5/site-packages/orange/urllib2_file.py
		lib/python2.5/site-packages/orange.pth
		share/doc/orange-svn-py25
	<<
<<
CompileScript: <<
	#!/bin/bash -ev
	
	# Compile scripts later on assume Python executable is named "python" - so we give them that
	export PATH=%b:$PATH
	ln -s %p/bin/python2.5 python
	
	# Compiles
	cd source
	make
	cd crs
	make
	mv _orngCRS.so ../../
	cd ../../
	
	# Corrects install name for modules
	install_name_tool -id %p/lib/python2.5/site-packages/orange/orange.so orange.so
	install_name_tool -change ../../orange.so %p/lib/python2.5/site-packages/orange/orange.so -id %p/lib/python2.5/site-packages/orange/orangeom.so orangeom.so
	install_name_tool -change ../../orange.so %p/lib/python2.5/site-packages/orange/orange.so -id %p/lib/python2.5/site-packages/orange/corn.so corn.so
	install_name_tool -change ../../orange.so %p/lib/python2.5/site-packages/orange/orange.so -id %p/lib/python2.5/site-packages/orange/statc.so statc.so
	install_name_tool -change ../../orange.so %p/lib/python2.5/site-packages/orange/orange.so -id %p/lib/python2.5/site-packages/orange/orangene.so orangene.so
	install_name_tool -id %p/lib/python2.5/site-packages/orange/_orngCRS.so _orngCRS.so
	
	# Prepares bundle
	cat <<-'EOF' > Orange.app/Contents/MacOS/Orange
		#!/bin/bash
		. %p/bin/init.sh
		CANVAS_FILE="%p/lib/python2.5/site-packages/orange/OrangeCanvas/orngCanvas.pyw"
		# LaunchServices passes the Carbon process identifier to the application with -psn parameter - we do not want it
		if [[ "\$1" == -psn* ]] ; then
			shift
		fi
		exec -a "$0" %p/bin/python2.5 "$CANVAS_FILE" "$@"
	EOF
	chmod +x Orange.app/Contents/MacOS/Orange
<<
InstallScript: <<
	#!/bin/bash -ev
	
	# Documentation for orange-svn
	mkdir -p %i/share/doc/orange-svn/
	cp COPYING LICENSES %i/share/doc/orange-svn/
	cp doc/style.css %i/share/doc/orange-svn/
	mv doc/widgets/ %i/share/doc/orange-svn/
	
	# Documentation for orange-svn-py25
	mkdir -p %i/share/doc/orange-svn-py25/
	cp COPYING LICENSES %i/share/doc/orange-svn-py25/
	mv doc/* %i/share/doc/orange-svn-py25/
	
	# Cleans up
	rm -rf COPYING LICENSES doc/ source/
	rm -rf c45.dll
	
	# Files for both orange-svn and orange-svn-py25
	mkdir -p %i/lib/python2.5/site-packages/orange/
	mv * %i/lib/python2.5/site-packages/orange/
	mv %i/lib/python2.5/site-packages/orange/Orange.app/ . # This goes back ;-)
	
	# Installation registration
	echo "orange" > %i/lib/python2.5/site-packages/orange.pth
	echo "datasetsPath=\"%p/share/doc/orange-svn/datasets/\"" > %i/lib/python2.5/site-packages/orange/orngConfiguration.py
<<
<<
